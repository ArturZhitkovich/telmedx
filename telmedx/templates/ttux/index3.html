{% extends "layout.html" %}
{% block metatitle %}telmedx | Video Feed:  {{ dev.name }}{% endblock %}
{% block metadescription %}Looking for the next big thing in healtcare? Checkout telmedx.com{% endblock %}
{% block nav %}
    <ul class="nav collapse navbar-collapse navbar-nav">
        <li>
            <a style="padding-bottom: 5px; padding-top: 10px;" href="/devices">
                <img style="height: 30px;" src="/static/img/controls/arrowhead7.png">
                &nbsp;
                <img style="height: 45px;" src="/static/img/controls/responsive.png">
            </a>
        </li>
    </ul>
    <ul class="nav collapse navbar-collapse navbar-nav navbar-right">
        <li>
            <a style="padding-top: 20px; padding-bottom: 11px;" href="/ttux/logout">
                <span style="font-size: 25px; color: black;" class="glyphicon glyphicon-off"></span>
            </a>
        </li>
    </ul>
{% endblock nav %}

{% block content %}
    <div id="device-video-page" class="container" style="width: 100%;">
        <div id="first-row" class="row">
            <div class="col-md-4">
                <div class="video-panel panel panel-default resizable" style="overflow: hidden;">
                    <div class="panel-heading ui-widget-header" style="padding: 9px 8px 8px 8px;">
                        <h3 class="panel-title">
                            <div style="float:left;">{{ dev.name }} &nbsp;</div>
                            <div style="float: right;" id="rotate-buttons">
                                <button id="rotate-left" class="btn btn-default" style="padding: 3px;">
                                    <img style="height: 25px;" src="/static/img/controls/rotating1.png">
                                </button>
                                <button id="rotate-right" class="btn btn-default" style="padding: 3px;">
                                    <img style="height: 25px;" src="/static/img/controls/rotating1-opp.png">
                                </button>
                            </div>
                            <div class="clearfix"></div>
                        </h3>
                    </div>
                    <div class="stream-container" style="resize: both;">
                        <div class="panel-body">
                            <div id="stream">
                                <div class="canvas-wrapper">
                                    <canvas width="360" height="480" id="video-canvas"></canvas>
                                    '
                                    <div style="margin: 0px;" id="stream_status">{{ OTUK }}: Waiting...</div>
                                </div>
                            </div>
                            <div class="row ui-widget-content" style="resize: both;">
                                <div class="text-center">
                                    <div class="btn-group">
                                        <button id="camera-toggle" style="width: 86px; height: 64px; display:none;"
                                                type="button" class="btn btn-default">
                                            <div id="camera-toggle-icon">
                                                <img style="height: 50px;" src="/static/img/controls/switch19.png">
                                            </div>
                                        </button>
                                        <button type="button" id="capture-button" class="btn btn-default"><img
                                                style="height: 50px; cursor:pointer;"
                                                src="/static/img/controls/Capture_Button.png"/></button>
                                        <button id="flash-toggle" type="button" style="width: 86px; display:none;"
                                                class="btn btn-default"><img style="height: 50px;"
                                                                             src="/static/img/controls/open103.png">
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-2">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title"><img style="height: 30px;" src="/static/img/controls/images10.png"></h3>
                    </div>
                    <div id="pastSnapshots" style="min-height:100px;" class="panel-body">
                        <div style="position: absolute;bottom: -50px;">
                            <p style="margin-bottom: 5px; color: #fff;">Powered By</p>
                            <img src="/static/img/powered-by.png" style="width: 125px;">
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="resizable-right" style="overflow: hidden;">
                    <div id="capture-snaper" class="panel panel-default">
                        <div class="panel-heading" id="cap-head">
                            <h3 class="panel-title">
                                <img style="height: 30px;" src="/static/img/controls/picture11.png">
                                <div style="float: right;" id="zoom-controls">
                                    <div style="clear: both;">
                                        <div class="btn-group">
                                            <button class="btn btn-sm btn-default zoom-in">
                                                <img style="height: 20px;" src="/static/img/controls/zoom7.png">
                                            </button>
                                            <button class="btn btn-sm btn-default zoom-out">
                                                <img style="height: 20px;" src="/static/img/controls/minus13.png">
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </h3>
                        </div>
                        <div id="cap-body" class="panel-body">
                            <div id="snapshots" style="position:relative; height:100%;">
                                <div class="panzoom">
                                    <img id="activeSnapshot"
                                         src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="
                                         alt=""/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <canvas style="display:none;" id="b"></canvas>
    </div>
    <!-- Modal -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="myModalLabel">Modal title</h4>
                </div>
                <div class="modal-body">
                    <div id="drawing-layer"></div>
                    <img id="editSnapshot" class="hundo" src="/static/img/controls/spinner.gif">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>
            </div>
        </div>
    </div>
    <div id="deviceName" data-name="{{ dev.name }}"></div>
{% endblock content %}

{% block afterjquery %}
    {#    <script type="text/javascript" src="/static/js/jquery.panzoom.min.js"></script>#}
    {#    <script type="text/javascript" src="/static/js/videofeed-1.js"></script>#}
    {#    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>#}
    {#    <script type="text/javascript" src="/static/js/drag.js"></script>#}
    {#    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">#}
{% endblock afterjquery %}